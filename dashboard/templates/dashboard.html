<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HealOps - AI-Powered Incident Prediction & Auto-Resolution</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
            background: #f8f9fa;
            color: #1a1a1a;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            background: #ffffff;
            padding: 25px 35px;
            margin-bottom: 30px;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.08);
        }
        
        .logo {
            font-size: 22px;
            font-weight: 700;
            color: #1a1a1a;
            letter-spacing: -0.5px;
        }
        
        .logo-subtitle {
            font-size: 11px;
            color: #6c757d;
            font-weight: 400;
            margin-top: 2px;
        }
        
        h1 {
            font-size: 28px;
            font-weight: 600;
            color: #1a1a1a;
            margin-bottom: 5px;
            letter-spacing: -0.3px;
        }
        
        .subtitle {
            color: #6c757d;
            font-size: 14px;
            font-weight: 400;
        }
        
        /* Navigation */
        .nav-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid #e9ecef;
        }
        
        .nav-tab {
            padding: 12px 24px;
            background: none;
            border: none;
            border-bottom: 3px solid transparent;
            color: #6c757d;
            font-size: 15px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            margin-bottom: -2px;
        }
        
        .nav-tab:hover {
            color: #1a1a1a;
            background: #f8f9fa;
        }
        
        .nav-tab.active {
            color: #667eea;
            border-bottom-color: #667eea;
        }
        
        .page {
            display: none;
        }
        
        .page.active {
            display: block;
        }
        
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .metric-card {
            background: #ffffff;
            padding: 24px;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.08);
            transition: all 0.2s;
        }
        
        .metric-card:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.12);
        }
        
        .metric-label {
            font-size: 13px;
            color: #6c757d;
            font-weight: 500;
            margin-bottom: 8px;
            text-transform: none;
        }
        
        .metric-value {
            font-size: 32px;
            font-weight: 600;
            color: #1a1a1a;
            margin-bottom: 4px;
            letter-spacing: -0.5px;
        }
        
        .metric-change {
            font-size: 12px;
            color: #28a745;
            display: flex;
            align-items: center;
            gap: 4px;
        }
        
        .metric-change.negative {
            color: #dc3545;
        }
        
        .chart-card {
            background: #ffffff;
            padding: 28px;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.08);
            margin-bottom: 20px;
        }
        
        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }
        
        .chart-title {
            font-size: 16px;
            font-weight: 600;
            color: #1a1a1a;
        }
        
        .chart-legend {
            font-size: 13px;
            color: #6c757d;
        }
        
        .content-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .section {
            background: #ffffff;
            padding: 28px;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.08);
        }
        
        .section-title {
            font-size: 16px;
            font-weight: 600;
            color: #1a1a1a;
            margin-bottom: 20px;
        }
        
        .table-header {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr;
            padding: 12px 0;
            border-bottom: 1px solid #e9ecef;
            font-size: 13px;
            color: #6c757d;
            font-weight: 500;
        }
        
        .table-row {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr;
            padding: 16px 0;
            border-bottom: 1px solid #f1f3f5;
            font-size: 14px;
            color: #495057;
            align-items: center;
        }
        
        .table-row:last-child {
            border-bottom: none;
        }
        
        .item-icon {
            width: 40px;
            height: 40px;
            border-radius: 6px;
            margin-right: 12px;
            object-fit: cover;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 6px;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4CAF50, #45a049);
            border-radius: 4px;
            transition: width 0.3s ease;
        }
        
        .progress-fill.high {
            background: linear-gradient(90deg, #4CAF50, #45a049);
        }
        
        .progress-fill.medium {
            background: linear-gradient(90deg, #FFA726, #FF9800);
        }
        
        .progress-fill.low {
            background: linear-gradient(90deg, #5C6BC0, #3F51B5);
        }
        
        .badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .badge-success {
            background: #d4edda;
            color: #155724;
        }
        
        .badge-warning {
            background: #fff3cd;
            color: #856404;
        }
        
        .badge-danger {
            background: #f8d7da;
            color: #721c24;
        }
        
        .badge-info {
            background: #d1ecf1;
            color: #0c5460;
        }
        
        .scroll-container {
            max-height: 400px;
            overflow-y: auto;
        }
        
        .scroll-container::-webkit-scrollbar {
            width: 6px;
        }
        
        .scroll-container::-webkit-scrollbar-track {
            background: #f1f3f5;
            border-radius: 3px;
        }
        
        .scroll-container::-webkit-scrollbar-thumb {
            background: #adb5bd;
            border-radius: 3px;
        }
        
        .scroll-container::-webkit-scrollbar-thumb:hover {
            background: #868e96;
        }
        
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #adb5bd;
            font-size: 14px;
        }
        
        .status-dot {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .status-active {
            background: #28a745;
        }
        
        .status-warning {
            background: #ffc107;
        }
        
        .status-error {
            background: #dc3545;
        }
        
        .activity-chart {
            display: flex;
            align-items: flex-end;
            justify-content: space-between;
            height: 180px;
            gap: 8px;
            padding: 20px 0;
        }
        
        .bar {
            flex: 1;
            background: linear-gradient(to top, #5C6BC0, #7E8CE0);
            border-radius: 4px 4px 0 0;
            min-height: 20px;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .bar:hover {
            background: linear-gradient(to top, #4CAF50, #66BB6A);
            transform: translateY(-4px);
        }
        
        .bar-label {
            position: absolute;
            bottom: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 11px;
            color: #868e96;
            white-space: nowrap;
        }
        
        /* Fault Injection Buttons */
        .fault-btn {
            background: #ffffff;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 16px;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .fault-btn:hover {
            border-color: #5C6BC0;
            box-shadow: 0 4px 12px rgba(92, 107, 192, 0.15);
            transform: translateY(-2px);
        }
        
        .fault-btn:active {
            transform: translateY(0);
        }
        
        .fault-btn.injecting {
            border-color: #FFA726;
            background: #fff3e0;
            cursor: wait;
        }
        
        .fault-btn.injecting::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 167, 38, 0.3), transparent);
            animation: shimmer 1.5s infinite;
        }
        
        @keyframes shimmer {
            100% { left: 100%; }
        }
        
        .fault-icon {
            display: block;
            margin: 0 auto 8px auto;
            color: #5C6BC0;
            transition: all 0.2s;
        }
        
        .fault-btn:hover .fault-icon {
            color: #3F51B5;
            transform: scale(1.1);
        }
        
        .fault-label {
            font-size: 14px;
            font-weight: 600;
            color: #1a1a1a;
            margin-bottom: 4px;
        }
        
        .fault-desc {
            font-size: 12px;
            color: #6c757d;
        }
        
        #injection-status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
            display: block !important;
        }
        
        #injection-status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
            display: block !important;
        }
        
        #injection-status.info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
            display: block !important;
        }
        
        /* Search and Filter Styles */
        .search-bar {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .search-input {
            flex: 1;
            min-width: 250px;
            padding: 10px 16px;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            font-size: 14px;
        }
        
        .filter-select {
            padding: 10px 16px;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            font-size: 14px;
            background: white;
            cursor: pointer;
        }
        
        /* Log Entry Styles */
        .log-entry {
            padding: 12px 16px;
            border-left: 3px solid #dee2e6;
            background: #f8f9fa;
            margin-bottom: 8px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
        }
        
        .log-entry.error {
            border-left-color: #dc3545;
            background: #fff5f5;
        }
        
        .log-entry.warning {
            border-left-color: #ffc107;
            background: #fffbf0;
        }
        
        .log-entry.info {
            border-left-color: #17a2b8;
            background: #f0f9ff;
        }
        
        .log-entry.success {
            border-left-color: #28a745;
            background: #f0fff4;
        }
        
        /* Incident Card Styles */
        .incident-card {
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 16px;
            transition: all 0.2s;
        }
        
        .incident-card:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transform: translateY(-2px);
        }
        
        @media (max-width: 1200px) {
            .content-grid {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 768px) {
            .metrics-grid {
                grid-template-columns: 1fr;
            }
            
            .header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .table-header, .table-row {
                grid-template-columns: 2fr 1fr 1fr;
            }
            
            .table-header > :last-child, .table-row > :last-child {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div>
                <div class="logo">Heal-Ops : AI-Powered Incident Prediction & Auto-Resolution</div>
            </div>
        </div>
        
        <!-- Navigation Tabs -->
        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showPage('dashboard')">Dashboard</button>
            <button class="nav-tab" onclick="showPage('logs')">System Logs</button>
            <button class="nav-tab" onclick="showPage('settings')">Settings</button>
        </div>
        
        <!-- Dashboard Page -->
        <div id="page-dashboard" class="page active">
            <div style="margin-bottom: 25px;">
                <h1>HealOps</h1>
                <p class="subtitle"><span class="status-dot status-active"></span>AI-Powered Incident Prediction & Auto-Resolution</p>
            </div>
        
        <!-- Fault Injection Control Panel -->
        <div class="chart-card" style="margin-bottom: 20px;">
            <div class="chart-header">
                <div class="chart-title">‚ö° Fault Injection Controls</div>
                <div class="chart-legend" id="last-injection">Ready to inject faults</div>
            </div>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px; margin-top: 16px;">
                <button class="fault-btn fault-cpu" onclick="injectFault('cpu')">
                    <svg class="fault-icon" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="4" y="4" width="16" height="16" rx="2"/>
                        <rect x="9" y="9" width="6" height="6"/>
                        <line x1="9" y1="1" x2="9" y2="4"/><line x1="15" y1="1" x2="15" y2="4"/>
                        <line x1="9" y1="20" x2="9" y2="23"/><line x1="15" y1="20" x2="15" y2="23"/>
                        <line x1="20" y1="9" x2="23" y2="9"/><line x1="20" y1="14" x2="23" y2="14"/>
                        <line x1="1" y1="9" x2="4" y2="9"/><line x1="1" y1="14" x2="4" y2="14"/>
                    </svg>
                    <div class="fault-label">CPU Saturation</div>
                    <div class="fault-desc">Spike CPU to 100%</div>
                </button>
                <button class="fault-btn fault-memory" onclick="injectFault('memory')">
                    <svg class="fault-icon" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 3h18v18H3z"/>
                        <path d="M7 7h4v10H7z"/>
                        <path d="M13 7h4v10h-4z"/>
                    </svg>
                    <div class="fault-label">Memory Leak</div>
                    <div class="fault-desc">Consume RAM rapidly</div>
                </button>
                <button class="fault-btn fault-crash" onclick="injectFault('crash')">
                    <svg class="fault-icon" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>
                    </svg>
                    <div class="fault-label">Service Crash</div>
                    <div class="fault-desc">Simulate crash failure</div>
                </button>
                <button class="fault-btn fault-disk" onclick="injectFault('disk')">
                    <svg class="fault-icon" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <ellipse cx="12" cy="5" rx="9" ry="3"/>
                        <path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"/>
                        <path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"/>
                    </svg>
                    <div class="fault-label">Disk Exhaustion</div>
                    <div class="fault-desc">Fill disk space</div>
                </button>
                <button class="fault-btn fault-random" onclick="injectFault('random')">
                    <svg class="fault-icon" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="7" height="7"/>
                        <rect x="14" y="3" width="7" height="7"/>
                        <rect x="14" y="14" width="7" height="7"/>
                        <rect x="3" y="14" width="7" height="7"/>
                    </svg>
                    <div class="fault-label">Random Fault</div>
                    <div class="fault-desc">Surprise me!</div>
                </button>
            </div>
            <div id="injection-status" style="margin-top: 16px; padding: 12px; border-radius: 6px; display: none;"></div>
        </div>
        
        <!-- Agent Status Banner -->
        <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 16px 24px; border-radius: 8px; margin-bottom: 20px; color: white; box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                    <div style="font-size: 13px; opacity: 0.9; margin-bottom: 4px;">Current Agent</div>
                    <div style="font-size: 18px; font-weight: 600;" id="agent-name">System Idle</div>
                </div>
                <div>
                    <div style="font-size: 13px; opacity: 0.9; margin-bottom: 4px;">Operation</div>
                    <div style="font-size: 16px; font-weight: 500;" id="agent-operation">Ready to process</div>
                </div>
                <div style="width: 12px; height: 12px; background: #4ade80; border-radius: 50%; box-shadow: 0 0 12px rgba(74, 222, 128, 0.6);"></div>
            </div>
        </div>
        
        <div class="metrics-grid">
            <div class="metric-card">
                <div class="metric-label">Active Incidents</div>
                <div class="metric-value" id="stat-incidents">0</div>
                <div class="metric-change">
                    <span>‚Üë Real-time</span>
                </div>
            </div>
            <div class="metric-card">
                <div class="metric-label">Total Remediations</div>
                <div class="metric-value" id="stat-remediations">0</div>
                <div class="metric-change">
                    <span>‚Üë Real-time</span>
                </div>
            </div>
            <div class="metric-card">
                <div class="metric-label">Success Rate</div>
                <div class="metric-value" id="stat-success-rate">0%</div>
                <div class="metric-change">
                    <span>Target: 95%</span>
                </div>
            </div>
            <div class="metric-card">
                <div class="metric-label">LLM Actions</div>
                <div class="metric-value" id="stat-llm">0</div>
                <div class="metric-change">
                    <span>‚Üë Real-time</span>
                </div>
            </div>
        </div>
        
        <div class="content-grid">
            <div class="section">
                <div class="section-title">Recent Incidents</div>
                <div class="scroll-container" id="incidents-container">
                    <div class="empty-state">No incidents detected yet<br><small>The system is monitoring for anomalies</small></div>
                </div>
            </div>
            
            <div class="section">
                <div class="section-title">System Status</div>
                <div class="scroll-container" id="status-container">
                    <div style="padding: 10px 0;">
                        <div style="margin-bottom: 20px;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                <span style="font-size: 14px; color: #495057;">Detection Agent</span>
                                <span style="font-size: 13px; color: #28a745; font-weight: 500;">Active</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill high" style="width: 100%;"></div>
                            </div>
                        </div>
                        <div style="margin-bottom: 20px;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                <span style="font-size: 14px; color: #495057;">Remediation Agent</span>
                                <span style="font-size: 13px; color: #28a745; font-weight: 500;">Ready</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill high" style="width: 100%;"></div>
                            </div>
                        </div>
                        <div style="margin-bottom: 20px;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                <span style="font-size: 14px; color: #495057;">LLM Engine</span>
                                <span style="font-size: 13px; color: #28a745; font-weight: 500;" id="llm-status">Connected</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill high" style="width: 100%;"></div>
                            </div>
                        </div>
                        <div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                <span style="font-size: 14px; color: #495057;">LocalStack</span>
                                <span style="font-size: 13px; color: #28a745; font-weight: 500;">Connected</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill high" style="width: 100%;"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="content-grid">
            <div class="section">
                <div class="section-title">Recent Remediations</div>
                <div class="table-header">
                    <div>Incident Type</div>
                    <div>Status</div>
                    <div>Time</div>
                    <div>Duration</div>
                </div>
                <div class="scroll-container" id="remediations-container">
                    <div class="empty-state">No remediations performed yet</div>
                </div>
            </div>
            
            <div class="section">
                <div class="section-title">LLM Actions</div>
                <div class="scroll-container" id="llm-container">
                    <div class="empty-state">No LLM actions recorded yet</div>
                </div>
            </div>
        </div>
        
        <!-- Command Execution History -->
        <div class="section" style="margin-top: 20px;">
            <div class="section-title">Command Execution History</div>
            <div class="table-header">
                <div style="flex: 2;">Command</div>
                <div>Status</div>
                <div style="flex: 1.5;">Action</div>
                <div>Timestamp</div>
            </div>
            <div class="scroll-container" id="commands-container">
                <div class="empty-state">No commands executed yet</div>
            </div>
        </div>
        </div> <!-- End Dashboard Page -->
        
        <!-- System Logs Page -->
        <div id="page-logs" class="page">
            <div style="margin-bottom: 25px;">
                <h1>System Logs</h1>
                <p class="subtitle"><span class="status-dot status-active"></span>Real-time console output and LLM actions</p>
            </div>
            
            <div class="content-grid">
                <div class="section">
                    <div class="section-title">Console Logs</div>
                    <div class="scroll-container" id="console-logs" style="max-height: 600px; overflow-y: auto;">
                        <div class="empty-state">No console logs yet</div>
                    </div>
                </div>
                
                <div class="section">
                    <div class="section-title">LLM Actions</div>
                    <div class="scroll-container" id="llm-actions-logs" style="max-height: 600px; overflow-y: auto;">
                        <div class="empty-state">No LLM actions recorded yet</div>
                    </div>
                </div>
            </div>
        </div> <!-- End System Logs Page -->
        
        <!-- Settings Page -->
        <div id="page-settings" class="page">
            <div style="margin-bottom: 25px;">
                <h1>Settings</h1>
                <p class="subtitle"><span class="status-dot status-active"></span>System configuration and data management</p>
            </div>
            
            <div class="metric-card" style="border-left: 4px solid #dc3545;">
                <h2 style="margin-bottom: 16px; color: #1a1a1a; font-size: 20px;">‚ö†Ô∏è Data Management</h2>
                <p style="margin-bottom: 24px; color: #495057; font-size: 15px; line-height: 1.6;">
                    Clear all data from the system including incidents, remediations, agent decisions, metrics, and command history. 
                    <br><strong style="color: #dc3545;">This action cannot be undone.</strong>
                </p>
                
                <div id="clear-status" style="margin-bottom: 20px;"></div>
                
                <button onclick="confirmClearData()" style="background: linear-gradient(135deg, #dc3545, #c82333); color: white; border: none; padding: 16px 32px; border-radius: 8px; font-size: 15px; font-weight: 600; cursor: pointer; display: inline-flex; align-items: center; gap: 12px; box-shadow: 0 4px 12px rgba(220, 53, 69, 0.3); transition: all 0.2s;">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                        <polyline points="3 6 5 6 21 6"/>
                        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                        <line x1="10" y1="11" x2="10" y2="17"/>
                        <line x1="14" y1="11" x2="14" y2="17"/>
                    </svg>
                    <span>Clear All Data</span>
                </button>
            </div>
            
            <div class="metric-card" style="margin-top: 25px;">
                <h2 style="margin-bottom: 20px; color: #1a1a1a; font-size: 20px;">üìä System Information</h2>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div style="padding: 16px; background: #f8f9fa; border-radius: 8px; border-left: 3px solid #667eea;">
                        <div style="font-size: 13px; color: #6c757d; margin-bottom: 4px;">LLM Provider</div>
                        <div style="font-size: 16px; font-weight: 600; color: #1a1a1a;">Nvidia NIM</div>
                    </div>
                    <div style="padding: 16px; background: #f8f9fa; border-radius: 8px; border-left: 3px solid #667eea;">
                        <div style="font-size: 13px; color: #6c757d; margin-bottom: 4px;">Model</div>
                        <div style="font-size: 16px; font-weight: 600; color: #1a1a1a;">openai/gpt-oss-20b</div>
                    </div>
                    <div style="padding: 16px; background: #f8f9fa; border-radius: 8px; border-left: 3px solid #28a745;">
                        <div style="font-size: 13px; color: #6c757d; margin-bottom: 4px;">Inference Speed</div>
                        <div style="font-size: 16px; font-weight: 600; color: #1a1a1a;">0.5-1.5s</div>
                    </div>
                    <div style="padding: 16px; background: #f8f9fa; border-radius: 8px; border-left: 3px solid #17a2b8;">
                        <div style="font-size: 13px; color: #6c757d; margin-bottom: 4px;">LocalStack</div>
                        <div style="font-size: 14px; font-weight: 600; color: #1a1a1a;">localhost:4566</div>
                    </div>
                </div>
            </div>
        </div> <!-- End Settings Page -->
    </div>
    
    <script>
        // Page navigation
        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
            document.querySelectorAll('.nav-tab').forEach(tab => tab.classList.remove('active'));
            
            // Show selected page
            document.getElementById('page-' + pageId).classList.add('active');
            event.target.classList.add('active');
            
            // Load page-specific data
            if (pageId === 'logs') {
                loadSystemLogs();
                loadLLMActionsLogs();
            }
        }
        
        function updateStats() {
            fetch('/api/stats')
                .then(response => response.json())
                .then(data => {
                    document.getElementById('stat-incidents').textContent = data.total_incidents || 0;
                    document.getElementById('stat-remediations').textContent = data.total_remediations || 0;
                    document.getElementById('stat-success-rate').textContent = (data.success_rate || 0) + '%';
                    document.getElementById('stat-llm').textContent = data.total_llm_actions || 0;
                    
                    // Update LLM status indicator
                    const llmStatus = document.getElementById('llm-status');
                    if (data.total_llm_actions > 0) {
                        llmStatus.textContent = 'Active';
                        llmStatus.style.color = '#28a745';
                    }
                })
                .catch(err => console.error('Error fetching stats:', err));
        }
        
        function updateIncidents() {
            fetch('/api/incidents')
                .then(response => response.json())
                .then(data => {
                    const container = document.getElementById('incidents-container');
                    if (data.length === 0) {
                        container.innerHTML = '<div class="empty-state">No incidents detected yet<br><small>The system is monitoring for anomalies</small></div>';
                        return;
                    }
                    
                    container.innerHTML = data.map(incident => {
                        const severityClass = incident.severity.toLowerCase() === 'critical' ? 'danger' : 
                                            incident.severity.toLowerCase() === 'high' ? 'warning' : 'info';
                        const statusClass = incident.status.toLowerCase() === 'active' ? 'danger' : 
                                          incident.status.toLowerCase() === 'resolved' ? 'success' : 'warning';
                        
                        // Parse affected components and evidence
                        let components = [];
                        let evidence = [];
                        try {
                            components = JSON.parse(incident.affected_components || '[]');
                            evidence = JSON.parse(incident.evidence || '[]');
                        } catch (e) {}
                        
                        const componentsHtml = components.length > 0 ? 
                            `<div style="margin-top: 8px; font-size: 13px;"><strong>Components:</strong> ${components.join(', ')}</div>` : '';
                        
                        const evidenceHtml = evidence.length > 0 ? 
                            `<details style="margin-top: 8px; font-size: 13px; color: #6c757d;">
                                <summary style="cursor: pointer; color: #667eea;">View Evidence (${evidence.length} items)</summary>
                                <ul style="margin: 8px 0 0 20px; line-height: 1.6;">
                                    ${evidence.map(e => `<li>${e}</li>`).join('')}
                                </ul>
                            </details>` : '';
                        
                        return `
                        <div style="padding: 16px; border-bottom: 1px solid #f1f3f5;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                <div style="font-weight: 500; color: #1a1a1a;">
                                    <span class="badge badge-${severityClass}">${incident.severity}</span>
                                    ${incident.type}
                                </div>
                                <div style="font-size: 13px; color: #868e96;">${incident.timestamp_str}</div>
                            </div>
                            <div style="font-size: 13px; color: #6c757d;">
                                Status: <span class="badge badge-${statusClass}">${incident.status}</span>
                            </div>
                            ${componentsHtml}
                            ${evidenceHtml}
                        </div>
                    `}).join('');
                })
                .catch(err => console.error('Error fetching incidents:', err));
        }
        
        function updateRemediations() {
            fetch('/api/remediations')
                .then(response => response.json())
                .then(data => {
                    const container = document.getElementById('remediations-container');
                    if (data.length === 0) {
                        container.innerHTML = '<div class="empty-state">No remediations performed yet</div>';
                        return;
                    }
                    
                    container.innerHTML = data.map(rem => `
                        <div class="table-row">
                            <div style="font-weight: 500; color: #495057;">${rem.incident_type}</div>
                            <div>
                                <span class="badge badge-${rem.success ? 'success' : 'danger'}">
                                    ${rem.success ? 'Success' : 'Failed'}
                                </span>
                            </div>
                            <div style="font-size: 13px; color: #868e96;">${rem.timestamp_str}</div>
                            <div style="font-size: 13px; color: #868e96;">${rem.latency_seconds || 0}s</div>
                        </div>
                    `).join('');
                })
                .catch(err => console.error('Error fetching remediations:', err));
        }
        
        function updateLLMActions() {
            fetch('/api/llm-actions')
                .then(response => response.json())
                .then(data => {
                    const container = document.getElementById('llm-container');
                    if (data.length === 0) {
                        container.innerHTML = '<div class="empty-state">No LLM actions recorded yet</div>';
                        return;
                    }
                    
                    container.innerHTML = data.map(action => {
                        const agentClass = action.agent_type === 'DETECTION' ? 'info' : 'warning';
                        return `
                        <div style="padding: 16px; border-bottom: 1px solid #f1f3f5;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                <div>
                                    <span class="badge badge-${agentClass}">${action.agent_type}</span>
                                    <span style="font-size: 13px; color: #868e96;">${action.latency_ms}ms</span>
                                </div>
                                <div style="font-size: 13px; color: #868e96;">${action.timestamp_str}</div>
                            </div>
                            <div style="font-size: 13px; color: #6c757d; line-height: 1.5;">
                                ${action.prompt.substring(0, 200)}...
                            </div>
                        </div>
                    `}).join('');
                })
                .catch(err => console.error('Error fetching LLM actions:', err));
        }
        
        function updateAgentStatus() {
            fetch('/api/agent-status')
                .then(response => response.json())
                .then(data => {
                    const agentName = document.getElementById('agent-name');
                    const agentOperation = document.getElementById('agent-operation');
                    
                    if (data.current_agent === 'idle') {
                        agentName.textContent = 'System Idle';
                        agentOperation.textContent = data.operation;
                    } else if (data.current_agent === 'error') {
                        agentName.textContent = 'Error';
                        agentOperation.textContent = data.operation;
                    } else {
                        agentName.textContent = data.current_agent;
                        agentOperation.textContent = data.operation;
                    }
                })
                .catch(err => console.error('Error fetching agent status:', err));
        }
        
        function getCommandExplanation(command, status) {
            const cmd = command.toLowerCase();
            
            if (cmd.includes('pkill') || cmd.includes('kill')) return 'üõë Stopped process';
            if (cmd.includes('systemctl restart') || cmd.includes('service restart')) return 'üîÑ Restarted service';
            if (cmd.includes('rm -rf') || cmd.includes('del')) return 'üóëÔ∏è Cleaned up files';
            if (cmd.includes('docker restart')) return 'üê≥ Restarted container';
            if (cmd.includes('kubectl') || cmd.includes('k8s')) return '‚ò∏Ô∏è Kubernetes action';
            if (cmd.includes('nginx') || cmd.includes('apache')) return 'üåê Web server fix';
            if (cmd.includes('disk') || cmd.includes('df')) return 'üíæ Disk cleanup';
            if (cmd.includes('memory') || cmd.includes('cache')) return 'üßπ Memory cleanup';
            if (cmd.includes('cpu') || cmd.includes('top')) return '‚ö° CPU optimization';
            if (cmd.includes('echo') || cmd.includes('log')) return 'üìù Logged action';
            if (cmd.includes('test') || cmd.includes('check')) return 'üîç Health check';
            
            return status === 'SUCCESS' ? '‚úÖ Executed successfully' : '‚ùå Execution failed';
        }
        
        function updateCommandHistory() {
            fetch('/api/command-history')
                .then(response => response.json())
                .then(data => {
                    const container = document.getElementById('commands-container');
                    if (data.length === 0) {
                        container.innerHTML = '<div class="empty-state">No commands executed yet</div>';
                        return;
                    }
                    
                    container.innerHTML = data.map(cmd => {
                        const explanation = getCommandExplanation(cmd.command, cmd.status);
                        return `
                        <div class="table-row">
                            <div style="flex: 2; font-family: monospace; font-size: 12px; color: #495057;">${cmd.command}</div>
                            <div>
                                <span class="badge badge-${cmd.status === 'SUCCESS' ? 'success' : 'danger'}">
                                    ${cmd.status}
                                </span>
                            </div>
                            <div style="flex: 1.5; font-size: 13px; color: #495057;">${explanation}</div>
                            <div style="font-size: 13px; color: #868e96;">${cmd.timestamp_str}</div>
                        </div>
                    `}).join('');
                })
                .catch(err => console.error('Error fetching command history:', err));
        }
        
        function updateAll() {
            updateStats();
            updateIncidents();
            updateRemediations();
            updateLLMActions();
            updateAgentStatus();
            updateCommandHistory();
        }
        
        // Fault injection function
        function injectFault(faultType) {
            const btn = event.target.closest('.fault-btn');
            const statusDiv = document.getElementById('injection-status');
            const lastInjection = document.getElementById('last-injection');
            
            // Disable button and show loading
            btn.classList.add('injecting');
            btn.disabled = true;
            
            // Show processing message
            statusDiv.className = 'info';
            statusDiv.innerHTML = `<strong>‚ö° Injecting ${faultType.toUpperCase()} fault...</strong><br>The LLM will detect and fix this automatically. Watch the metrics!`;
            
            const faultNames = {
                'cpu': 'CPU Saturation',
                'memory': 'Memory Leak',
                'crash': 'Service Crash',
                'disk': 'Disk Exhaustion',
                'random': 'Random Fault'
            };
            
            lastInjection.textContent = `Injecting ${faultNames[faultType]}...`;
            
            fetch(`/api/inject/${faultType}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                }
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    statusDiv.className = 'success';
                    statusDiv.innerHTML = `<strong>‚úÖ ${data.message}</strong><br>Watch the dashboard update in real-time as the LLM detects and fixes the issue!`;
                    lastInjection.textContent = `Last: ${faultNames[faultType]} - ${new Date().toLocaleTimeString()}`;
                    
                    // Force immediate refresh
                    setTimeout(updateAll, 2000);
                    setTimeout(updateAll, 5000);
                    setTimeout(updateAll, 10000);
                } else {
                    statusDiv.className = 'error';
                    statusDiv.innerHTML = `<strong>‚ùå Error:</strong> ${data.error}`;
                    lastInjection.textContent = 'Error injecting fault';
                }
                
                // Re-enable button after 3 seconds
                setTimeout(() => {
                    btn.classList.remove('injecting');
                    btn.disabled = false;
                }, 3000);
            })
            .catch(error => {
                statusDiv.className = 'error';
                statusDiv.innerHTML = `<strong>‚ùå Network Error:</strong> ${error.message}`;
                lastInjection.textContent = 'Error injecting fault';
                
                // Re-enable button
                btn.classList.remove('injecting');
                btn.disabled = false;
            });
        }
        
        // Settings Page Functions
        function confirmClearData() {
            if (confirm('‚ö†Ô∏è WARNING: This will permanently delete ALL data from the system including:\\n\\n‚Ä¢ All incidents\\n‚Ä¢ All remediations\\n‚Ä¢ Agent decisions\\n‚Ä¢ System metrics\\n‚Ä¢ Command history\\n‚Ä¢ LLM actions\\n\\nThis action CANNOT be undone. Are you absolutely sure?')) {
                clearAllData();
            }
        }
        
        function clearAllData() {
            const statusDiv = document.getElementById('clear-status');
            statusDiv.className = 'info';
            statusDiv.innerHTML = '<strong>üîÑ Clearing all data...</strong><br>This may take a moment.';
            
            fetch('/api/clear-data', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                }
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    statusDiv.className = 'success';
                    statusDiv.innerHTML = `<strong>‚úÖ Success!</strong><br>${data.message}<br>Cleared tables: ${data.cleared_tables.join(', ')}`;
                    
                    // Refresh all data displays after 2 seconds
                    setTimeout(() => {
                        loadDashboardData();
                        loadSystemLogs();
                        loadIncidentBrowser();
                    }, 2000);
                } else {
                    statusDiv.className = 'error';
                    statusDiv.innerHTML = `<strong>‚ùå Error:</strong> ${data.error}`;
                }
            })
            .catch(error => {
                statusDiv.className = 'error';
                statusDiv.innerHTML = `<strong>‚ùå Network Error:</strong> ${error.message}`;
            });
        }
        
        // System Logs Page Functions
        function loadSystemLogs() {
            fetch('/api/logs')
                .then(response => response.json())
                .then(data => {
                    const container = document.getElementById('console-logs');
                    if (!data || data.length === 0) {
                        container.innerHTML = '<div class="empty-state">No console logs available</div>';
                        return;
                    }
                    
                    container.innerHTML = data.map(log => {
                        const logClass = log.message.includes('ERROR') ? 'error' : 
                                       log.message.includes('WARNING') ? 'warning' : 'info';
                        return `
                            <div class="log-entry ${logClass}">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                                    <span style="font-weight: 600;">${log.log_group || 'System'}</span>
                                    <span style="color: #6c757d;">${log.timestamp_str || new Date(log.timestamp).toLocaleString()}</span>
                                </div>
                                <div>${log.message}</div>
                            </div>
                        `;
                    }).join('');
                })
                .catch(err => {
                    console.error('Error loading logs:', err);
                    document.getElementById('console-logs').innerHTML = '<div class="empty-state">Error loading logs</div>';
                });
        }
        
        function loadLLMActionsLogs() {
            fetch('/api/llm-actions')
                .then(response => response.json())
                .then(data => {
                    const container = document.getElementById('llm-actions-logs');
                    if (!data || data.length === 0) {
                        container.innerHTML = '<div class="empty-state">No LLM actions recorded yet</div>';
                        return;
                    }
                    
                    container.innerHTML = data.map(action => {
                        const agentClass = action.agent_type === 'DETECTION' ? 'info' : 'warning';
                        const successClass = action.success ? 'success' : 'error';
                        return `
                            <div class="log-entry ${successClass}">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                    <div>
                                        <span class="badge badge-${agentClass}">${action.agent_type}</span>
                                        <span style="margin-left: 8px; color: #6c757d;">${action.latency_ms}ms</span>
                                    </div>
                                    <span style="color: #6c757d;">${action.timestamp_str}</span>
                                </div>
                                <div style="margin-bottom: 8px;"><strong>Prompt:</strong> ${action.prompt}</div>
                                <div><strong>Response:</strong> ${action.response}</div>
                            </div>
                        `;
                    }).join('');
                })
                .catch(err => {
                    console.error('Error loading LLM actions:', err);
                    document.getElementById('llm-actions-logs').innerHTML = '<div class="empty-state">Error loading LLM actions</div>';
                });
        }
        
        // Incident Browser Functions
        let allIncidents = [];
        let allRemediations = {};
        
        function loadIncidentBrowser() {
            Promise.all([
                fetch('/api/incidents').then(r => r.json()),
                fetch('/api/remediations').then(r => r.json())
            ]).then(([incidents, remediations]) => {
                allIncidents = incidents;
                
                // Map remediations by incident type
                remediations.forEach(rem => {
                    allRemediations[rem.incident_type] = allRemediations[rem.incident_type] || [];
                    allRemediations[rem.incident_type].push(rem);
                });
                
                displayFilteredIncidents(allIncidents);
            }).catch(err => {
                console.error('Error loading incidents:', err);
                document.getElementById('incidents-browser').innerHTML = '<div class="empty-state">Error loading incidents</div>';
            });
        }
        
        function filterIncidents() {
            const searchTerm = document.getElementById('search-input').value.toLowerCase();
            const severity = document.getElementById('filter-severity').value;
            const agent = document.getElementById('filter-agent').value;
            const dateFilter = document.getElementById('filter-date').value;
            
            let filtered = allIncidents.filter(incident => {
                // Search filter
                const matchesSearch = !searchTerm || 
                    incident.type.toLowerCase().includes(searchTerm) ||
                    incident.incident_id.toLowerCase().includes(searchTerm) ||
                    (incident.affected_components && incident.affected_components.toLowerCase().includes(searchTerm));
                
                // Severity filter
                const matchesSeverity = !severity || incident.severity === severity;
                
                // Date filter
                let matchesDate = true;
                if (dateFilter) {
                    const now = Date.now() / 1000;
                    const incidentTime = incident.timestamp;
                    if (dateFilter === 'today') {
                        matchesDate = (now - incidentTime) < 86400;
                    } else if (dateFilter === 'week') {
                        matchesDate = (now - incidentTime) < 604800;
                    } else if (dateFilter === 'month') {
                        matchesDate = (now - incidentTime) < 2592000;
                    }
                }
                
                return matchesSearch && matchesSeverity && matchesDate;
            });
            
            displayFilteredIncidents(filtered);
        }
        
        function displayFilteredIncidents(incidents) {
            const container = document.getElementById('incidents-browser');
            
            if (incidents.length === 0) {
                container.innerHTML = '<div class="empty-state">No incidents match your filters</div>';
                return;
            }
            
            container.innerHTML = incidents.map(incident => {
                const severityClass = incident.severity.toLowerCase() === 'critical' ? 'danger' : 
                                    incident.severity.toLowerCase() === 'high' ? 'warning' : 'info';
                
                let components = [];
                let evidence = [];
                
                try {
                    components = incident.affected_components ? 
                        (typeof incident.affected_components === 'string' ? 
                            JSON.parse(incident.affected_components) : incident.affected_components) : [];
                } catch (e) {
                    components = [];
                }
                
                try {
                    evidence = incident.evidence ? 
                        (typeof incident.evidence === 'string' ? 
                            JSON.parse(incident.evidence) : incident.evidence) : [];
                } catch (e) {
                    evidence = [];
                }
                
                const relatedRemediations = allRemediations[incident.type] || [];
                const remediation = relatedRemediations.length > 0 ? relatedRemediations[0] : null;
                
                return `
                    <div class="incident-card">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 16px;">
                            <div>
                                <h3 style="margin-bottom: 8px;">
                                    <span class="badge badge-${severityClass}" style="font-size: 12px;">${incident.severity}</span>
                                    ${incident.type}
                                </h3>
                                <div style="font-size: 13px; color: #6c757d;">
                                    ID: ${incident.incident_id}<br>
                                    Time: ${incident.timestamp_str || new Date(incident.timestamp * 1000).toLocaleString()}
                                </div>
                            </div>
                            <span class="badge badge-${incident.status === 'ACTIVE' ? 'danger' : 'success'}">${incident.status}</span>
                        </div>
                        
                        ${components.length > 0 ? `
                            <div style="margin-bottom: 12px;">
                                <strong style="font-size: 14px;">Affected Components:</strong>
                                <div style="margin-top: 4px;">
                                    ${components.map(c => `<span class="badge badge-info" style="margin-right: 6px;">${c}</span>`).join('')}
                                </div>
                            </div>
                        ` : ''}
                        
                        ${evidence.length > 0 ? `
                            <details style="margin-bottom: 12px;">
                                <summary style="cursor: pointer; font-weight: 500;">Evidence (${evidence.length} items)</summary>
                                <ul style="margin-top: 8px; padding-left: 20px;">
                                    ${evidence.map(e => `<li style="margin-bottom: 4px; font-size: 13px;">${e}</li>`).join('')}
                                </ul>
                            </details>
                        ` : ''}
                        
                        ${remediation ? `
                            <div style="background: #f8f9fa; padding: 12px; border-radius: 6px; border-left: 3px solid ${remediation.success ? '#28a745' : '#dc3545'};">
                                <strong style="color: ${remediation.success ? '#28a745' : '#dc3545'};">
                                    ${remediation.success ? '‚úì Fixed' : '‚úó Fix Failed'}
                                </strong> - ${remediation.timestamp_str}
                                <details style="margin-top: 8px;">
                                    <summary style="cursor: pointer; font-size: 13px;">View Remediation Details</summary>
                                    <pre style="margin-top: 8px; font-size: 12px; overflow-x: auto;">${JSON.stringify(JSON.parse(remediation.plan), null, 2)}</pre>
                                </details>
                            </div>
                        ` : `
                            <div style="background: #fff3cd; padding: 12px; border-radius: 6px; border-left: 3px solid #ffc107;">
                                <strong>‚è≥ Awaiting Remediation</strong>
                            </div>
                        `}
                    </div>
                `;
            }).join('');
        }
        
        // Initial load
        updateAll();
        
        // Auto-refresh every 5 seconds
        setInterval(updateAll, 5000);
        
        console.log('Dashboard loaded - auto-refreshing every 5 seconds');
        console.log('üéÆ Interactive fault injection ready! Click any button to trigger an error.');
    </script>
</body>
</html>
